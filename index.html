<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Smart Alarm</title>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  font-family: system-ui;
  background:#f2f4f8;
  display:flex;
  justify-content:center;
}
.card{
  background:white;
  width:320px;
  margin-top:30px;
  padding:20px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
h1{text-align:center}
.time{
  font-size:36px;
  text-align:center;
  color:#1e90ff;
}
.sensor{
  display:flex;
  justify-content:space-between;
  margin:8px 0;
}
button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border:none;
  border-radius:10px;
  font-size:16px;
}
.on{background:#2ecc71;color:white}
.off{background:#e74c3c;color:white}
.save{background:#3498db;color:white}
</style>
</head>

<body>
<div class="card">
<h1>â° Smart Alarm</h1>
<div class="time" id="time">--:--:--</div>

<select id="hour"></select>
<select id="minute"></select>

<button class="save" onclick="saveAlarm()">ğŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸à¹€à¸§à¸¥à¸²</button>
<button class="on" onclick="setEnable(true)">ğŸ”” à¹€à¸›à¸´à¸” Alarm</button>
<button class="off" onclick="setEnable(false)">â›” à¸›à¸´à¸” Alarm</button>

<hr>
<div class="sensor">ğŸŒ¡ à¸­à¸¸à¸“à¸«à¸ à¸¹à¸¡à¸´ <span id="temp">--</span></div>
<div class="sensor">ğŸ’§ à¸„à¸§à¸²à¸¡à¸Šà¸·à¹‰à¸™ <span id="hum">--</span></div>
<div class="sensor">ğŸ’¡ à¹à¸ªà¸‡ <span id="light">--</span></div>
</div>

<script>
firebase.initializeApp({
  databaseURL:"https://smart-alarm-9c9ee-default-rtdb.asia-southeast1.firebasedatabase.app"
});
const db = firebase.database();

for(let i=0;i<24;i++) hour.innerHTML+=`<option>${i}</option>`;
for(let i=0;i<60;i++) minute.innerHTML+=`<option>${i}</option>`;

db.ref("time/current").on("value",s=>{
  time.innerText = s.val();
});

db.ref("sensor/temperature").on("value",s=>{
  temp.innerText = s.val()+" Â°C";
});
db.ref("sensor/humidity").on("value",s=>{
  hum.innerText = s.val()+" %";
});
db.ref("sensor/light").on("value",s=>{
  light.innerText = s.val();
});

function saveAlarm(){
  db.ref("alarm").update({
    hour:+hour.value,
    minute:+minute.value
  });
}
function setEnable(v){
  db.ref("alarm/enable").set(v);
}
</script>
</body>
</html>
